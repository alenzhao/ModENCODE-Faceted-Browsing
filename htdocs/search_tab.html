<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
 <head>
    <title>Faceted Search of modENCODE Data Sets</title>
  
    <link href="js/modencode.js" type="application/json" rel="exhibit/data" />

    <link rel='stylesheet' href="css/common.css" type='text/css' />
    <link rel='stylesheet' href="css/me.css" type='text/css' />

    <script src="js/exhibit/exhibit-api.js?bundle=false"
            type="text/javascript"></script>

    <script src="js/exhibit/ajax/simile-ajax-api.js?bundle=false"
            type="text/javascript"></script>

    <script src="js/prototype.js"
            type="text/javascript"></script>

    <script src="js/scriptaculous/scriptaculous.js"
	    type="text/javascript"></script>

    <script type="text/javascript" src="js/balloon.config.js"></script>
    <script type="text/javascript" src="js/balloon.js"></script>

    <script src="js/functions.js"
	    type="text/javascript">
    </script>
 </head> 

<body onload="register_handlers()" ex:afterdataload="alert('loaded?')">
<div class="header">
    <h1><a href="www.modencode.org"><img src="http://www.modencode.org/img/modENCODE_logo_small.png" height="60" align="middle" border="0"/></a>
      Search modENCODE Data Sets</h1>
</div>

<!-- this is the search box, list of selected tracks, and control buttons -->
<div class="status">
  <table width="100%" border='0'>
    <tr valign="bottom">
      <td width="20%"  style="vertical-align:middle">
	<b>Internet Explorer users: If this page is too slow for you, consider Firefox, Safari or Chrome.</b><br><br>
	<b>Search:</b> <span id="searchbox" ex:role="facet" ex:facetClass="TextSearch"></span>
      </td>
      <td colspan="2">
	<table width="100%">
	  <tr>
	    <th id="dataset_count">Selected Datasets:</th>
	  </tr>
	  <tr>
	    <th align="left">
	      <ul id="shopping_cart"><i style="color:gray">No datasets selected</i></ul>
	    </th>
	  </tr>
	  <tr>
	    <th>
	      <div id="retrieve_buttons" style="display:none">
		<button id="browse_worm">Browse worm tracks</button>
		<button id="browse_fly">Browse fly tracks</button>
		<button id="download data">Download</button>
		<button id="clear data" onclick="clear_all()">Clear All</button>
	      </div>
	    </th>
	  </tr>
	</table>

	<div id="selection_count"></div>

      </td>
      <td>&nbsp;</td>
    </tr>
  </table>
</div>

<!-- this is the faceted search area and results-->
<table border='0'>

<!-- left column, organism, technique, target and factor facets -->
  <td id="left-column" width="20%">
    <span class="contract"><img/><b>Organism</b>
      <div ex:role="facet" ex:expression=".organism"  ex:scroll="false" ex:sortMode="count"></div>
    </span>
    <span class="contract"><img/><b>Technique</b>
      <div  ex:role="facet" ex:expression=".technique" ex:scroll="false" ex:sortMode="count"></div>
    </span>
    <span class="contract"><img/><b>Target Type</b>
      <div  ex:role="facet" ex:expression=".target"    ex:scroll="false" ex:facetLabel="" ex:sortMode="count"></div>
    </span>
  </td>
  
<!-- middle column: exhibit results -->
  <td id="middle-column">

    <b>Select</b><label><input type="radio" name="selectall" id='select-all'><b>all</b></input></label>
                 <label><input type="radio" name="selectall" id='select-none' checked="true"><b>none</b></input></label>
    <div style="height:800px; overflow:auto"
	id="data-table"
	ex:role="view" 
	ex:viewClass="Tabular" 
	ex:columnLabels="Select Dataset,Organism,Technique,Target,Factor,Conditions"
	ex:rowStyler="zebraStyler"
	ex:border="1"
	ex:cellSpacing="2"
	ex:cellPadding="3"
	ex:columns=".label,.organism,.technique,.target,.factor,.Developmental-Stage" 
	ex:abbreviatedCount="20" id="filter_results">
     <table>
       <tr class="submission">
	 <td><input type="checkbox" class="submission-select" onClick="toggle_track(this)" ex:id-subcontent="{{.label}}"></input>
	   <span ex:content=".label"></span>
	 </td>
	 <td><span ex:content=".organism"></span></td>
	 <td><span ex:content=".technique"></span></td>
	 <td><span ex:content=".target"></span></td>
	 <td><span ex:content=".factor"></span></td>
	 <td>
	   <span ex:if-exists=".Developmental-Stage">
	     <span ex:content=".Developmental-Stage"></span>
	   </span>
	   <span ex:if-exists=".temperature">
	     <span ex:content=".temperature"></span>
	   </span>
	   <span ex:if-exists=".Compound">
	     <span ex:content=".Compound"></span>
	   </span>
	 </td>
       </tr>
     </table>
</div>
<!-- right column: developmental stage, strain, cell line and tissue facets -->
  <td id="right-column" width="20%">
    <span class="expand"><img/><b>Factor</b>
      <div  ex:role="facet" ex:expression=".factor"  ex:height:"200px"  ex:scroll="false" ex:facetLabel=""></div>
    </span>
    <span class="expand"><img/><b>Developmental Stage</b>
      <div  ex:role="facet" ex:expression=".Developmental-Stage" ex:scroll="false" ex:facetLabel=""></div>
    </span>
    <span class="expand"><img/><b>Strain</b>
      <div  ex:role="facet" ex:expression=".Strain"              ex:scroll="false" ex:sortMode="count"></div> 
    </span>
    <span class="expand"><img/><b>Cell Line</b>
      <div  ex:role="facet" ex:expression=".Cell-Line"           ex:scroll="false" ex:facetLabel=""></div>
    </span>
    <span class="expand"><img/><b>Tissue</b>
      <div  ex:role="facet" ex:expression=".Tissue"              ex:scroll="false" ex:facetLabel=""></div>
    </span>
    <span class="expand"><img/><b>Compound</b>
      <div  ex:role="facet" ex:expression=".Compound"            ex:scroll="false" ex:facetLabel=""></div>
    </span>
    <span class="expand"><img/><b>Temperature</b>
      <div  ex:role="facet" ex:expression=".temperature"         ex:scroll="false" ex:facetLabel=""></div>
    </span>
  </td>
</tr>
</table>

</body>
</html>
